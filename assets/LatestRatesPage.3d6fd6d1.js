import{C as k,v as q,L as x,B as w,w as B,x as P,y as D,A as E,D as L,E as N,F as O,_ as S,G as j,H as R,K as U,M as V,N as $,J as A}from"./NoDataPlaceholder.a03a10a0.js";import{d as F,r,w as K,K as c,L as p,M as v,f as o,U as _,ae as l,a2 as f}from"./index.5dec1e70.js";import"./use-router-link.7a3728b2.js";import"./QItem.c0ba6dce.js";import"./currency-types.store.03f8ecd3.js";import"./axios.ce13ef04.js";const M=l("div",{class:"text-h6 q-mb-md"},"Currency pair",-1),Q={key:0,class:"preloader__container row justify-center"},T={key:1,class:"full-width row full-width"},z={class:"column col-6"},G=l("div",{class:"text-h6 q-mb-md"},"Bar chart",-1),H={class:"column col-6"},I=l("div",{class:"text-h6 q-mb-md"},"Pie chart",-1),te=F({__name:"LatestRatesPage",setup(J){k.register(q,x,w,B,P,D,E);const n=r(null),s=r([]),i=r(null),d=r(null),g={responsive:!0},h={responsive:!0},y=t=>{const e=Object.keys(t.rates);return{labels:e,datasets:[{label:`Rates for ${t.date}`,backgroundColor:e.map(a=>A(a)),data:Object.values(t.rates)}]}},u=r(!1),b=L();return K([n,s],async([t,e])=>{if(!(!t||!e||!e.length))try{u.value=!0;const a=await O.getItems({from:t.id,to:e.map(C=>C.id)}),m=y(a);i.value=m,d.value=m,console.log(a)}catch{b.notify({type:"negative",message:"Error loading rates"})}finally{u.value=!1}},{immediate:!0}),(t,e)=>(c(),p(N,{padding:"",class:"q-gutter-y-md"},{default:v(()=>[o(j,{class:"column"},{default:v(()=>[M,o(S,{"base-currency":n.value,"onUpdate:baseCurrency":e[0]||(e[0]=a=>n.value=a),"quote-currencies":s.value,"onUpdate:quoteCurrencies":e[1]||(e[1]=a=>s.value=a)},null,8,["base-currency","quote-currencies"])]),_:1}),u.value?(c(),_("div",Q,[o(R,{indeterminate:"",size:"90px",thickness:.2,color:"pink","track-color":"transparent",class:"q-ma-md"})])):i.value&&n.value&&s.value&&s.value.length?(c(),_("div",T,[l("div",z,[G,o(f(U),{data:i.value,options:g},null,8,["data"])]),l("div",H,[I,o(f(V),{data:d.value,options:h},null,8,["data"])])])):(c(),p($,{key:2,class:"q-mt-xl"}))]),_:1}))}});export{te as default};
